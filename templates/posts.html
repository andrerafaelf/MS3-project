{% extends "base.html" %}
{% block content %}

  <h3 class="center-align grey-text text-darken-2">Recent Posts</h3>


  <div class="row card-panel grey lighten-5">
    <form action="{{ url_for('search') }}" method="post" class="col s12">
      <div class="row valign-wrapper center-align">
        <div class="input-field col s12 m8">
          <i class="fas fa-search prefix"></i>
          <input type="text" name="query" id="query" minlength="3" class="validate" required>
          <label for="query">Search Posts</label>
        </div>
        <div class="col s12 m4">
          <button type="submit" class="light-blue darken-1 custom-btn btn text-shadow">
            <i class="fas fa-search left"></i> Search
          </button>
          <a href="{{ url_for('get_posts') }}" class="red btn custom-btn text-shadow">Reset</a>
        </div>
      </div>
    </form>
  </div>

      {% if posts|length > 0 %}
      <div class="col s12 m7">
        {% for post in posts %}
        <h4 class="header center grey-text text-darken-2"><u>{{ post.post_name }}</u> {% if post.is_sfw == "off" %}
          <i class="fas fa-exclamation-triangle tooltipped" data-position="right" data-tooltip="NSFW"></i>
          {% endif %} </h4>
        <div class="card horizontal grey-text text-darken-2">
          <div class="card-image">
            <img src="{{ post.image_url }}">
          </div>
          <div class="card-stacked">
            <div class="card-content">
              <p>{{ post.user_opinion }}</p>
            </div>
            <div class="card-action">
              <p>Category: {{ post.category_name }}</p>
              <a href="{{ post.post_source }}">Source</a>
              <p><em>by: {{ post.created_by }}</em></p>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <h3 class=" red-text center-align">No Posts Found</h3>
      {% endif %}

    {% endblock %}
